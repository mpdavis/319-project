{% extends 'base.html' %}

{% block script %}
    <script type="text/javascript" src="/static/js/d3.v2.min.js"></script>
{% endblock %}

{% block content %}

    <div id="bracket">
    </div>

    {# D3 script must appear after the #bracket div has been instantiated #}
    <script type="text/javascript">

var margin = {top: 30, right: 10, bottom: 10, left: 10},
    width = 960 - margin.left - margin.right,
    halfWidth = width / 2,
    height = 500 - margin.top - margin.bottom,
    i = 0,
    duration = 500,
    root;

var svg = d3.select("#bracket").append("svg")
    .attr("width", width + margin.right + margin.left)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

{# TODO: Soften this hard-coded url. #}
d3.json("/tournament/json/?id={{ tournament_id }}", function(json) {
    d3.select("#bracket").select("svg")
      .append("text")
      .attr('style', 'font-family:monospace;font-color:#000;font-size:14pt;')
      .attr('transform', 'translate(' + 100 + ',' + 100 + ')')
      .text(json);
});

    </script>

{% endblock %}
